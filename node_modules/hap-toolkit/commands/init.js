"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function generate(e){""===e&&(e="HelloWorld"),promptName(e,_chalk.default.green("Init your Project"),function(e,t){if(!e){var a=t.name;createProject(a,_path.default.join(process.cwd(),a))}})}function promptName(e,t,a){var r={properties:{name:{message:t,default:e}}};_prompt.default.start(),_prompt.default.get(r,a)}function createProject(e,t){if(_fsExtra.default.existsSync(t))return console.log(_chalk.default.red('the folder "'+t+'" exists! Please rename your project.'));if(!(0,_utils.mkdirsSync)(t))return console.lot(_chalk.default.red('the folder "'+t+'" create failed!.'));var a=_path.default.join(__dirname,"..","templates","app/demo");copyFiles(t,a),replaceFiles({appName:e},["src/manifest.json","package.json"].map(function(e){return _path.default.join(t,e)}))}function copyFiles(e,t){var a=[];(0,_utils.traverseDirSync)(t,a),a.forEach(function(a){var r=_path.default.relative(t,a),n=_path.default.join(e,r).replace("modules","node_modules");_fsExtra.default.existsSync(n)?console.log(_chalk.default.yellow("file: ".concat(n," already existed."))):(console.log(_chalk.default.white("file: ".concat(n," created."))),_fsExtra.default.copySync(a,n))})}function replaceFiles(names,files){files.forEach(function(file){var content=_fsExtra.default.readFileSync(file,{encoding:"utf-8"});Object.keys(names).forEach(function(n){content=content.replace(eval("/{{".concat(n,"}}/g")),function(e){return names[n]||e})}),_fsExtra.default.writeFileSync(file,content)})}var _path=_interopRequireDefault(require("path")),_fsExtra=_interopRequireDefault(require("fs-extra")),_prompt=_interopRequireDefault(require("prompt")),_chalk=_interopRequireDefault(require("chalk")),_utils=require("./utils");module.exports=generate;