"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function extend(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if("function"==typeof Object.assign)Object.assign.apply(Object,[e].concat(r));else{var o=r.shift();for(var a in o)e[a]=o[a];r.length&&extend.apply(void 0,[e].concat(r))}return e}function merge(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r.length&&r.forEach(function(t){e=e.concat(t)}),e}function hyphenedToCamelCase(e){return e.replace(/-([a-z])/g,function(e,t){return t.toUpperCase()})}function camelCaseToHyphened(e){return e.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()})}function getNameByPath(e){return _path.default.basename(e).replace(/\..*$/,"")}function getFileNameWithHash(e,t){var r=_path.default.relative(".",e),n=(0,_hashSum.default)(r+t);return"./".concat(r,"?").concat(n)}function isEmptyObject(e){if(!e)return!0;for(var t in e)return!1;return!0}function isPlainObject(e){return toString.call(e)===OBJECT_STRING}function loadBabelModule(e){var t=_path.default.resolve(__dirname,"..","node_modules",e),r=_path.default.resolve(process.cwd(),"node_modules",e);return _fs.default.existsSync(t)?t:_fs.default.existsSync(r)?r:e}function getFilenameByPath(e){return _path.default.relative(".",e)}function stringifyFunction(e,t){return"function"==typeof t?FUNC_START+t.toString()+FUNC_END:t}function predicate(e){return"string"==typeof e?e===this.toString():this.match(e)}function sortFilesBy(e,t){var r=e.length;return e=e.sort(function(e,n){var o=t.findIndex(predicate,e),a=t.findIndex(predicate,n);return o=-1===o?r:o,a=-1===a?r:a,o-a})}function logWarn(e,t,r){t&&t.length&&t.forEach(function(t){var n=t.line&&t.column?"\t@"+t.line+":"+t.column:"";r||(t.reason.startsWith("ERROR")?colorconsole.error(e.context,t.reason+n):colorconsole.warn(e.context,t.reason+n))})}function makeRequireString(e,t,r){return print({loader:t,filepath:r}),"require("+_loaderUtils.default.stringifyRequest(e,t?"!!".concat(t,"!").concat(r):"".concat(r))+")\n"}function stringifyLoaders(e){return e.map(function(e){if("string"==typeof e)return e;var t=e.name,r=[];if(e.query)for(var n in e.query){var o=e.query[n];null!=o&&(!0===o?r.push(n):o instanceof Array?r.push("".concat(n,"[]=").concat(o.join(","))):r.push("".concat(n,"=").concat(o)))}return"".concat(t).concat(r.length?"?"+r.join("&"):"")}).join("!")}function generateMap(e,t,r){var n=e.resourcePath,o=getFileNameWithHash(n),a=_path.default.resolve("."),i=new _sourceMap.SourceMapGenerator({sourceRoot:a,skipValidation:!0});i.setSourceContent(o,t);var l=!0,c=!1,s=void 0;try{for(var u,p=r[Symbol.iterator]();!(l=(u=p.next()).done);l=!0){var f=u.value,d=f.original,h=f.generated;i.addMapping({source:o,original:d,generated:h})}}catch(e){c=!0,s=e}finally{try{l||null==p.return||p.return()}finally{if(c)throw s}}return i}function consumeMap(e,t,r){var n,o=new _sourceMap.SourceMapConsumer(r),a=[],i=[],l={};return splitSourceLine(t).forEach(function(e,t){t+=1;var r=o.originalPositionFor({line:t,column:0});r.source&&(n=r.source,a.push({line:r.line,column:r.column}),i.push({line:t,column:0}),l["line-".concat(t,"-column-").concat(0)]={line:r.line,column:r.column})}),{source:n,original:a,generated:i,mapping:l,sourcesContent:o.sourcesContent}}function mkdirsSync(e){return!!_fs.default.existsSync(e)||(mkdirsSync(_path.default.dirname(e))?(_fs.default.mkdirSync(e),!0):void 0)}function splitSourceLine(e){return e.split(REGEXP_LINE)}function print(e){if(showLog){var t="";if("string"==typeof e)t="######### "+e+" #########";else for(var r in e)t+="######### "+r+" : "+e[r]+" #########\n";console.log(t)}}function splitAttr(e,t){var r=[];if(t)switch(e.forEach(function(e,t){r[t]={},r[t].n=e}),t.length){case 1:e.forEach(function(e,n){r[n].v=t[0]});break;case 2:e.forEach(function(e,n){r[n].v=n%2?t[1]:t[0]});break;case 3:e.forEach(function(e,n){r[n].v=n%2?t[1]:t[n]});break;default:e.forEach(function(e,n){r[n].v=t[n]})}return r}function isValidValue(e){return"number"==typeof e||"string"==typeof e}function prependLevel(e,t){!logLevelMap[e]&&function(t){var r=t.toUpperCase().substr(0,4);r.paddEnd&&r.paddEnd(4),logLevelMap[e]=r}(e),"string"==typeof t[0]&&t[0].length>1&&"["!==t[0][0]&&(t[0]="[".concat(logLevelMap[e],"] ").concat(t[0]))}function equals(e,t,r){if(r){for(var n=arguments.length,o=new Array(n>3?n-3:0),a=3;a<n;a++)o[a-3]=arguments[a];if(r.apply(void 0,[e,t].concat(o)))return!0}var i=Object.prototype.toString.call(e);if(i!==Object.prototype.toString.call(t))return!1;if("[object Null]"===i||"[object Undefined]"===i)return!0;if("[object Object]"!==i&&"[object Array]"!==i)return Object(e).toString()===Object(t).toString();var l={};Object.keys(e).forEach(function(e){return l[e]=!0}),Object.keys(t).forEach(function(e){return l[e]=!0});for(var c=Object.keys(l),s=0;s<c.length;s++){var u=c[s];if(!equals(e[u],t[u],r,u))return!1}return!0}function resolvePath(e,t){if(t&&!_path.default.isAbsolute(e)){var r=_path.default.join(_path.default.dirname(t),e),n=_path.default.relative(_path.default.resolve(".","./src"),r);e=_path.default.join("/",n).replace(/\\/g,"/")}return e}function getWebpackOptions(e){return e.options||{}}function isUXRender(e){return e===UX_TYPE.PAGE||e===UX_TYPE.CARD}function isUXEntry(e){return e===UX_TYPE.PAGE||e===UX_TYPE.APP||e===UX_TYPE.CARD}function collectResFile(e,t,r,n,o){var a,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:".",l=_path.default.join(t,i),c={};return e.readdirSync(l).forEach(function(s){var u=_path.default.join(l,s),p=e.statSync(u),f=_path.default.basename(u),d=_path.default.extname(u);if(p.isFile())o.indexOf(f)<0&&("manifest.json"===f||n.indexOf(d)<0)&&(a=_path.default.join(r,i,_path.default.basename(s)),a=a.replace(/\\/g,"/"),c[a]=u);else if(p.isDirectory()){var h=_path.default.join(i,s);Object.assign(c,collectResFile(e,t,r,n,o,h))}}),c}function lsdirdeep(e){function t(e,r,n){var o=[],a=_path.default.posix.join(e,r);return n.readdirSync(a).forEach(function(i){var l=_path.default.posix.join(a,i),c=_path.default.posix.join(r,i);n.statSync(l).isFile()?o.push(c):o=o.concat(t(e,c,n))}),o}return t(e,".",arguments.length>1&&void 0!==arguments[1]?arguments[1]:_fs.default)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.extend=extend,exports.merge=merge,exports.hyphenedToCamelCase=hyphenedToCamelCase,exports.camelCaseToHyphened=camelCaseToHyphened,exports.getNameByPath=getNameByPath,exports.getFileNameWithHash=getFileNameWithHash,exports.isEmptyObject=isEmptyObject,exports.isPlainObject=isPlainObject,exports.loadBabelModule=loadBabelModule,exports.getFilenameByPath=getFilenameByPath,exports.stringifyFunction=stringifyFunction,exports.sortFilesBy=sortFilesBy,exports.logWarn=logWarn,exports.makeRequireString=makeRequireString,exports.stringifyLoaders=stringifyLoaders,exports.generateMap=generateMap,exports.consumeMap=consumeMap,exports.mkdirsSync=mkdirsSync,exports.splitSourceLine=splitSourceLine,exports.print=print,exports.splitAttr=splitAttr,exports.isValidValue=isValidValue,exports.equals=equals,exports.resolvePath=resolvePath,exports.getWebpackOptions=getWebpackOptions,exports.isUXRender=isUXRender,exports.isUXEntry=isUXEntry,exports.collectResFile=collectResFile,exports.lsdirdeep=lsdirdeep,exports.FRAG_TYPE=exports.UX_TYPE=exports.colorconsole=exports.FUNC_END_REG=exports.FUNC_END=exports.FUNC_START_REG=exports.FUNC_START=void 0;var _path=_interopRequireDefault(require("path")),_loaderUtils=_interopRequireDefault(require("loader-utils")),_hashSum=_interopRequireDefault(require("hash-sum")),_fs=_interopRequireDefault(require("fs")),_sourceMap=require("source-map"),_chalk=_interopRequireDefault(require("chalk")),toString=Object.prototype.toString,OBJECT_STRING="[object Object]",FUNC_START="#####FUNC_START#####";exports.FUNC_START=FUNC_START;var FUNC_START_REG=new RegExp("[\"']"+FUNC_START,"g");exports.FUNC_START_REG=FUNC_START_REG;var FUNC_END="#####FUNC_END#####";exports.FUNC_END=FUNC_END;var FUNC_END_REG=new RegExp(FUNC_END+"[\"']","g");exports.FUNC_END_REG=FUNC_END_REG;var REGEXP_LINE=/\r?\n/g,showLog=!1,logLevelMap={},colorconsole={trace:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];prependLevel("trace",r),(e=console).trace.apply(e,r)},log:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];prependLevel("log",t),console.log(_chalk.default.green.apply(_chalk.default,t))},info:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];prependLevel("info",t),console.info(_chalk.default.green.apply(_chalk.default,t))},warn:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];prependLevel("warn",r),console.warn((e=_chalk.default.yellow).bold.apply(e,r))},error:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];prependLevel("error",r),console.error((e=_chalk.default.red).bold.apply(e,r))},throw:function(){var e;throw new Error((e=_chalk.default.red).bold.apply(e,arguments))}};exports.colorconsole=colorconsole;var UX_TYPE={APP:"app",PAGE:"page",COMP:"comp",CARD:"card"};exports.UX_TYPE=UX_TYPE;var FRAG_TYPE={IMPORT:"import",TEMPLATE:"template",STYLE:"style",SCRIPT:"script"};exports.FRAG_TYPE=FRAG_TYPE;