"use strict";function _lengthValidator(e,a){return validator.length(a,e)}function makeLengthValidator(e){return _lengthValidator.bind(null,e)}function makeEnumValidator(e){return validator.enum.bind(null,e)}function makeAbbrAttrValidator(e,a){return validator[e].bind(null,a)}function validate(e,a,t){var r,n,l=validatorMap[e];return"function"==typeof l?(r="function"!=typeof a?mightReferlocalResource(e)?l(a,t):l(a):{value:a},r.reason&&(n={reason:r.reason(e,a,r.value)})):(r={value:a},n={reason:"ERROR: 样式名`"+(0,_utils.camelCaseToHyphened)(e)+"`不支持"}),{value:r.value instanceof Array?r.value:[{n:e,v:r.value}],log:n}}function mightReferlocalResource(e){return cssUseLocalResource.indexOf(e)>-1}function validatePseudoClass(e){return e=e.replace(/^(:)/,""),cssPseudoClasses.indexOf(e.toLowerCase())>=0}function validatePseudoElement(e){return e=e.replace(/^(:)/,""),cssPseudoElements.indexOf(e.toLowerCase())>=0}var _utils=require("../../common/utils"),colorNames={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},cssPseudoClasses=["disabled","checked","focus","active","visited","autoplay"],cssPseudoElements=["before","after","first-line","first-letter"],cssLengthUnits=["px","%"],cssAngleUnits=["deg"],cssTimeUnits=["ms"],logTypes=["NOTE","WARNING","ERROR"],cssUseLocalResource=["mylocation","mylocationIconPath","backgroundImage","starForeground","starSecondary","starBackground","fontSrc"],REGEXP_LENGTH=/^[-+]?[0-9]*\.?[0-9]+(.*)$/,REGEXP_COLOR_LONG=/^#[0-9a-fA-F]{6}$/,REGEXP_COLOR_SHORT=/^#[0-9a-fA-F]{3}$/,REGEXP_COLOR_RGB=/^rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/,REGEXP_COLOR_RGBA=/^rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d*\.?\d+)\s*\)$/,REGEXP_ARRAYCOLORSTOP=/(rgba|rgb)\([0-9,.\spx%]+\)\s?[0-9-+px%]*|[#]?\w+\s?[0-9+-\spx%]*/gi,REGEXP_ARRAYCOLOR=/(?:.+?\s(?=[#a-zA-Z]))|.+/g,REGEXP_INT=/^[-+]?[0-9]+$/,REGEXP_URL=/^url\(\s*(['"]?)\s*([^'"()]+?)\s*\1\s*\)$/,REGEXP_LOCAL=/^local\(\s*(['"]?)\s*([^'"()]+?)\s*\1\s*\)$/,REGEXP_NAME=/^[a-zA-Z_]+[a-zA-Z0-9]*$/,REGEXP_TIME=/^[-+]?[0-9]*\.?[0-9]+(.*)$/,REGEXP_TRANSFORM_ITEM=/^([0-9a-zA-Z]+)\((.*)\)$/,REGEXP_GRADIENT_DIRECTION=/^\s*(to|bottom|right|left|top)|[-+]?[0-9]*\.?[0-9]+(.*)/,REGEXP_ANGLE=/^[-+]?[0-9]*\.?[0-9]+(.*)/,REGEXP_NUMBER=/^[-+]?[0-9]*\.?[0-9]+$/,REGEXP_POSITION=/^(center|left|right|top|bottom)$/,validator={length:function(e,a){e=(e||"").toString().trim();var t=e.match(REGEXP_LENGTH);if(a||(a=cssLengthUnits),t){var r=t[1];return 0!=+e||r?r?a.indexOf(r.toLowerCase())>=0?{value:e}:{value:parseFloat(e)+a[0],reason:function(e,t,n){return"ERROR: 属性 `"+(0,_utils.camelCaseToHyphened)(e)+"` 不支持单位 `"+r+"`, 目前仅支持 `"+JSON.stringify(a)+"`"}}:{value:parseFloat(e)+a[0],reason:function(e,t,r){return"WARNING: 属性 `"+(0,_utils.camelCaseToHyphened)(e)+"` 没有指定单位，默认为 `"+a[0]+"`"}}:{value:+e+a[0]}}return{value:null,reason:function(e,a,t){return"ERROR: 属性 `"+(0,_utils.camelCaseToHyphened)(e)+"` 的值 `"+a+"` 不正确(仅支持数值)"}}},color:function(e){if(e=(e||"").toString().trim(),e.match(REGEXP_COLOR_LONG))return{value:e};if(e.match(REGEXP_COLOR_SHORT))return{value:"#"+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]};if(colorNames[e])return{value:colorNames[e]};var a,t,r,n,l;return REGEXP_COLOR_RGB.exec(e)&&(a=REGEXP_COLOR_RGB.exec(e),t=parseInt(a[1]),r=parseInt(a[2]),n=parseInt(a[3]),t>=0&&t<=255&&r>=0&&r<=255&&n>=0&&n<=255)?{value:"rgb("+[t,r,n].join(",")+")"}:REGEXP_COLOR_RGBA.exec(e)&&(a=REGEXP_COLOR_RGBA.exec(e),t=parseInt(a[1]),r=parseInt(a[2]),n=parseInt(a[3]),l=parseFloat(a[4]),t>=0&&t<=255&&r>=0&&r<=255&&n>=0&&n<=255&&l>=0&&l<=1)?{value:"rgba("+[t,r,n,l].join(",")+")"}:"transparent"===e?{value:"rgba(0,0,0,0)"}:{value:null,reason:function(e,a,t){return"ERROR: 属性`"+(0,_utils.camelCaseToHyphened)(e)+"` 的颜色值 `"+a+"` 无效`"}}},number:function(e){e=(e||"").toString().trim();var a=e.match(REGEXP_NUMBER);return a&&!a[1]?{value:parseFloat(e)}:{value:null,reason:function(e,a,t){return"ERROR: 属性`"+(0,_utils.camelCaseToHyphened)(e)+"` 的值 `"+a+"` 无效 ` (仅支持数值)"}}},arraynumber:function(e,a){a=(a||"").toString().trim();var t=a.split(/[,\s]+/);if(t&&t.length<=e.length){var r,n=[],l=[],o=0;return t.forEach(function(e,a){if(r=validator.number(e),(0,_utils.isValidValue)(r.value)&&n.push(r.value),r.reason){var t=r.reason(a.toString(),e,r.value),i=t.match(/^([A-Z]+):/);if(i){var u=logTypes.indexOf(i[1]);o<logTypes.indexOf(i[1])&&(o=u),t=t.replace(i[0],"").trim()}l.push(t)}}),{value:o<2?(0,_utils.splitAttr)(e,n):null,reason:l.length>0?function(e,a,t){return logTypes[o]+": 属性`"+(0,_utils.camelCaseToHyphened)(e)+"` 的值 `"+a+"` 存在问题: \n  "+l.join("\n  ")}:null}}return{value:null,reason:function(e,a,t){return"ERROR: 属性`"+(0,_utils.camelCaseToHyphened)(e)+"` 的值 `"+a+"` 格式不正确"}}},integer:function(e){return e=(e||"").toString(),e.match(REGEXP_INT)?{value:parseInt(e,10)}:{value:null,reason:function(e,a,t){return"ERROR: 属性`"+(0,_utils.camelCaseToHyphened)(e)+"` 的值 `"+a+"` 无效 ` (仅支持整数)"}}},iterationcount:function(e){return e=(e||"").toString().trim(),e.match(REGEXP_INT)?{value:parseInt(e,10)}:/^infinite$/.test(e)?{value:-1}:{value:null,reason:function(e,a,t){return"ERROR: 属性`"+(0,_utils.camelCaseToHyphened)(e)+"` 的值 `"+a+"` 无效 ` (仅支持整数)"}}},url:function(e,a){if(e=(e||"").toString().trim(),e.match(/^none$/i))return{value:"none"};var t=REGEXP_URL.exec(e);if(t&&t[2].trim()){var r=t[2];return/^data:/.test(r)||/^http(s)?:/.test(r)||(r=(0,_utils.resolvePath)(r,a.filePath)),{value:r}}return{value:null,reason:function(e,a,t){return"WARNING: 属性`"+(0,_utils.camelCaseToHyphened)(e)+"` 的值 `"+a+"` 必须是 none 或者 url(...)"}}},fontSrc:function(e,a){e=(e||"").toString().trim();var t=e.split(",");if(t&&t.length>0){var r=[],n=[],l=0;return t.forEach(function(e,t){e=e.trim();var o={};if(/^local/.test(e)){var i,u=REGEXP_LOCAL.exec(e);u&&u[2].trim()&&(i=u[2]),o={value:i,reason:i?null:function(e,a){return"WARNING: @font-face中属性src`"+(0,_utils.camelCaseToHyphened)(e)+"`的值`"+a+"` 存在问题"}}}else o=validator.url(e,a);if((0,_utils.isValidValue)(o.value)&&r.push(o.value),o.reason){var s=o.reason(t.toString(),e,o.value),d=s.match(/^([A-Z]+):/);if(d){var c=logTypes.indexOf(d[1]);l<logTypes.indexOf(d[1])&&(l=c),s=s.replace(d[0],"").trim()}n.push(s)}}),{value:l<2?r:null,reason:n.length>0?function(e,a){return logTypes[l]+": @font-face中属性 `"+(0,_utils.camelCaseToHyphened)(e)+"` 的值 `"+a+"` 存在问题: \n  "+n.join("\n   ")}:null}}return{value:null,reason:function(e,a){return"ERROR: @font-face中属性`"+(0,_utils.camelCaseToHyphened)(e)+"` 的值 `"+a+"` 存在问题"}}},fontFamily:function(e){return e=(e||"").toString(),e?{value:e}:{value:null,reason:function(e,a){return"ERROR: 属性`"+(0,_utils.camelCaseToHyphened)(e)+"` 的值 `"+a+"` 存在问题"}}},position:function(e,a){e=(e||"").toString(),a||(a=cssLengthUnits);var t=e.split(/\s+|,/);if(t&&t.length>1){var r,n=[],l=[],o=0;return t.length>3&&(o=1,l.push("属性数目最多为3个, 忽略多余属性")),t.forEach(function(e,t){if(r=validator.length(e,a),(0,_utils.isValidValue)(r.value)&&n.push(r.value),r.reason){var i=r.reason(t.toString(),e,r.value),u=i.match(/^([A-Z]+):/);if(u){var s=logTypes.indexOf(u[1]);o<logTypes.indexOf(u[1])&&(o=s),i=i.replace(u[0],"").trim()}l.push(i)}}),{value:o<2?n.join(" "):null,reason:l.length>0?function(e,a,t){return logTypes[o]+": 属性`"+(0,_utils.camelCaseToHyphened)(e)+"` 的值 `"+a+"` 存在问题: \n  "+l.join("\n  ")}:null}}return{value:null,reason:function(e,a,t){return"ERROR: 属性`"+(0,_utils.camelCaseToHyphened)(e)+"` 的值 `"+a+"` 格式不正确"}}},name:function(e){return e=(e||"").toString(),e.match(REGEXP_NAME)?{value:e}:{value:null,reason:function(e,a,t){return"ERROR: 属性`"+(0,_utils.camelCaseToHyphened)(e)+"` 的值 `"+a+"` 格式不正确"}}},transform:function(e){e=(e||"").toString().trim();var a=e.replace(/\)\s+/g,")|").split("|");if(a&&a.length){var t,r={},n=[],l=0;return a.forEach(function(e,a){var o=e.match(REGEXP_TRANSFORM_ITEM);if(o){var i=o[2],u=o[1],s=transformValidatorMap[u];if("function"==typeof s){if("translate"!==u||/[,\s]+/.test(i.trim())||(i+=",0px"),t=s(i),t.value instanceof Array?t.value.forEach(function(e){(0,_utils.isValidValue)(e.v)&&(r[e.n]=e.v)}):(0,_utils.isValidValue)(t.value)&&(r[u]=t.value),t.reason){var d=t.reason(u,i,t.value),c=d.match(/^([A-Z]+):/);if(c){var v=logTypes.indexOf(c[1]);l<logTypes.indexOf(c[1])&&(l=v),d=d.replace(c[0],"").trim()}n.push(d)}}else n.push("属性 `"+u+"` 不支持")}else l=2,n.push("属性 `"+a+"` 的值格式不正确")}),{value:(0,_utils.isEmptyObject)(r)?null:JSON.stringify(r),reason:n.length>0?function(e,a,t){return logTypes[l]+": 属性`"+(0,_utils.camelCaseToHyphened)(e)+"` 的值 `"+a+"` 存在问题: \n  "+n.join("\n  ")}:null}}return{value:null,reason:function(e,a,t){return"ERROR: 属性`"+(0,_utils.camelCaseToHyphened)(e)+"` 的值 `"+a+"` 格式不正确"}}},background:function(e){e=(e||"").toString().trim();var a=e.split();if(e.indexOf("-gradient")>0){var t=/(repeating-linear|linear).*?(?=\s*(repeating|linear)|$)/g;a=e.match(t)}var r={values:[]};if(a&&a.length){var n=[],l=0;return a.forEach(function(e){var a,t;if(e.indexOf("-gradient")>=0&&(a=e.indexOf("repeating")>=0?"repeatingLinearGradient":"linearGradient",t=backgroundValidatorMap[a]),"function"==typeof t){var o=t(e);if((0,_utils.isValidValue)(o.value)){var i=JSON.parse(o.value);r.values.push(i)}if(o.reason){var u=o.reason(a,e,o.value),s=u.match(/^([A-Z]+):/);if(s){var d=logTypes.indexOf(s[1]);l<logTypes.indexOf(s[1])&&(l=d),u=u.replace(s[0],"").trim()}n.push(u)}}else l=2,n.push("背景类型 `"+e+"`暂不支持")}),{value:l<2?JSON.stringify(r):null,reason:n.length>0?function(e,a,t){return logTypes[l]+": 属性`"+(0,_utils.camelCaseToHyphened)(e)+"` 的值 `"+a+"` 存在问题: \n  "+n.join("\n  ")}:null}}return{value:null,reason:function(e,a,t){return"ERROR: 属性`"+(0,_utils.camelCaseToHyphened)(e)+"` 的值 `"+a+"` 格式不正确"}}},backgroundSize:function(e,a){e=(e||"").toString().trim(),a||(a=cssLengthUnits);var t,r,n=0,l=e.split(/\s+/);if(1===l.length){if(["cover","contain","auto"].indexOf(l[0])>-1)return{value:l[0]};if(r=validator.length(l[0],a),r.reason){t=r.reason("0",l[0],r.value);var o=t.match(/^([A-Z]+):/);o&&(n=logTypes.indexOf(o[1]),t=t.replace(o[0],"").trim())}return{value:(0,_utils.isValidValue)(r.value)?r.value:null,reason:t?function(e,a,r){return logTypes[n]+": 属性`"+(0,_utils.camelCaseToHyphened)(e)+"` 的值 `"+a+"` 存在问题: \n  "+t}:null}}if(2===l.length){var i=[],u=[];return l.forEach(function(e,l){if("auto"===e)return void i.push(e);if(r=validator.length(e,a),(0,_utils.isValidValue)(r.value)&&i.push(r.value),r.reason){t=r.reason(l.toString(),e,r.value);var o=t.match(/^([A-Z]+):/);if(o){var s=logTypes.indexOf(o[1]);n<s&&(n=s),t=t.replace(o[0],"").trim()}u.push(t)}}),{value:n<2?i.join(" "):null,reason:u.length>0?function(e,a,t){return logTypes[n]+": 属性`"+(0,_utils.camelCaseToHyphened)(e)+"` 的值 `"+a+"` 存在问题: \n  "+u.join("\n  ")}:null}}return{value:null,reason:function(e,a,t){return"ERROR: 属性`"+(0,_utils.camelCaseToHyphened)(e)+"` 的值 `"+a+"` 格式不正确"}}},backgroundPosition:function(e,a){e=(e||"").toString().trim(),a||(a=cssLengthUnits);var t,r,n=0,l=[],o=[],i=e.split(/\s+/);if(1===i.length){if(REGEXP_POSITION.test(i[0]))return{value:i[0]};if(r=validator.length(i[0],a),r.reason){t=r.reason("0",i[0],r.value);var u=t.match(/^([A-Z]+):/);u&&(n=logTypes.indexOf(u[1]),t=t.replace(u[0],"").trim())}return{value:(0,_utils.isValidValue)(r.value)?r.value:null,reason:t?function(e,a,r){return logTypes[n]+": 属性`"+(0,_utils.camelCaseToHyphened)(e)+"` 的值 `"+a+"` 存在问题: \n  "+t}:null}}if(2===i.length){var s=i[0],d=i[1];if("center"===s){if(REGEXP_POSITION.test(d))l=i;else if(r=validator.length(d,a),(0,_utils.isValidValue)(r.value)&&(l=i),r.reason){t=r.reason("1",d,r.value);var c=t.match(/^([A-Z]+):/);if(c){var v=logTypes.indexOf(c[1]);n<v&&(n=v),t=t.replace(c[0],"").trim()}o.push(t)}}else if(["top","bottom"].indexOf(s)>-1&&["left","right","center"].indexOf(d)>-1)l=i;else if(r=validator.length(s,a),["left","right"].indexOf(s)>-1||(0,_utils.isValidValue)(r.value))if(["top","bottom","center"].indexOf(d)>-1)l=i;else if(r=validator.length(d,a),(0,_utils.isValidValue)(r.value)&&(l=i),r.reason){t=r.reason("1",d,r.value);var g=t.match(/^([A-Z]+):/);if(g){var h=logTypes.indexOf(g[1]);n<h&&(n=h),t=t.replace(g[0],"").trim()}o.push(t)}return l.length||(n=2,o.length||o.push("属性值格式不正确")),{value:n<2?l.join(" "):null,reason:o.length>0?function(e,a,t){return logTypes[n]+": 属性`"+(0,_utils.camelCaseToHyphened)(e)+"` 的值 `"+a+"` 存在问题: \n  "+o.join("\n  ")}:null}}if(3===i.length){var f=i[0],m=i[1],p=i[2];return REGEXP_POSITION.test(f)&&(REGEXP_POSITION.test(m)&&(0,_utils.isValidValue)(validator.length(p,a).value)||REGEXP_POSITION.test(p)&&(0,_utils.isValidValue)(validator.length(m,a).value))&&(l=i),l.length||(n=2,o.length||o.push("属性值格式不正确")),{value:n<2?l.join(" "):null,reason:o.length>0?function(e,a,t){return logTypes[n]+": 属性`"+(0,_utils.camelCaseToHyphened)(e)+"` 的值 `"+a+"` 存在问题: \n  "+o.join("\n  ")}:null}}if(4===i.length){var E=i[0],R=i[1],y=i[2],F=i[3];return REGEXP_POSITION.test(E)&&REGEXP_POSITION.test(y)&&(0,_utils.isValidValue)(validator.length(R,a).value)&&(0,_utils.isValidValue)(validator.length(F,a).value)&&(l=i),l.length||(n=2,o.length||o.push("属性值格式不正确")),{value:n<2?l.join(" "):null,reason:o.length>0?function(e,a,t){return logTypes[n]+": 属性`"+(0,_utils.camelCaseToHyphened)(e)+"` 的值 `"+a+"` 存在问题: \n  "+o.join("\n  ")}:null}}return{value:null,reason:function(e,a,t){return"ERROR: 属性`"+(0,_utils.camelCaseToHyphened)(e)+"` 的值 `"+a+"` 格式不正确"}}},linearGradient:function(e){e=(e||"").toString().trim();var a={type:"",directions:["to","bottom"],values:[]},t={},r={},n=[],l=0,o=e.match(/^([0-9a-zA-Z-]+)\((.*)\)/);if(o){var i=(0,_utils.hyphenedToCamelCase)(o[1]);a.type=i;var u=o[2].split(/,/);if(REGEXP_GRADIENT_DIRECTION.test(u[0])){var s;if(/(to|bottom|right|left|top)/.test(u[0])?s=backgroundValidatorMap.linearGradientDirection:u[0].match(REGEXP_ANGLE)&&(s=backgroundValidatorMap.linearGradientAngle),"function"==typeof s&&(r=s(u[0]),u.splice(0,1),(0,_utils.isValidValue)(r.value)&&(a.directions=r.value.split(/\s+/)),r.reason)){var d=r.reason(i,u[0],r.value);if(d){var c=d.match(/^([A-Z]+):/);if(c){var v=logTypes.indexOf(c[1]);l<logTypes.indexOf(c[1])&&(l=v),d=d.replace(c[0],"").trim()}n.push(d)}}}if(u.length>0){if(t=(0,backgroundValidatorMap.linearGradientColor)(u),(0,_utils.isValidValue)(t.value)&&(a.values=JSON.parse(t.value)),t.reason){var g=t.reason(i,u,t.value);if(g){var h=g.match(/^([A-Z]+):/);if(h){var f=logTypes.indexOf(h[1]);l<logTypes.indexOf(h[1])&&(l=f),g=g.replace(h[0],"").trim()}n.push(g)}}}else l=2,n.push("参数 `"+e+"`缺少过渡颜色");return{value:l<2?JSON.stringify(a):null,reason:n.length>0?function(e,a,t){return logTypes[l]+": 属性`"+(0,_utils.camelCaseToHyphened)(e)+"` 的值 `"+a+"` 存在问题: \n  "+n.join("\n  ")}:null}}return{value:null,reason:function(e,a,t){return"ERROR: 属性`"+(0,_utils.camelCaseToHyphened)(e)+"` 的值 `"+a+"` 格式不正确"}}},time:function(e){e=(e||"").toString();var a=e.match(REGEXP_TIME);if(a){var t=a[1];if(t){if(cssTimeUnits.indexOf(t.toLowerCase())>=0)return{value:e};var r=parseFloat(e);return"s"===t.toLowerCase()?(r=Math.round(1e3*r),{value:r+cssTimeUnits[0],reason:function(e,a,r){return"WARNING: 属性 `"+(0,_utils.camelCaseToHyphened)(e)+"` 不支持单位 `"+t+"`, 自动转换为 `"+cssTimeUnits[0]+"`"}}):{value:r+cssTimeUnits[0],reason:function(e,a,r){return"ERROR: 属性 `"+(0,_utils.camelCaseToHyphened)(e)+"` 不支持单位 `"+t+"`, 目前仅支持 `"+JSON.stringify(cssTimeUnits)+"`"}}}return{value:parseFloat(e)+cssTimeUnits[0],reason:function(e,a,t){return"WARNING: 属性 `"+(0,_utils.camelCaseToHyphened)(e)+"` 没有指定单位，默认为 `"+cssTimeUnits[0]+"`"}}}return{value:null,reason:function(e,a,t){return"ERROR: 属性 `"+(0,_utils.camelCaseToHyphened)(e)+"` 的值不正确 `"+a+"` (仅支持数值)"}}},angle:function(e){e=(e||"").toString().trim();var a=e.match(REGEXP_ANGLE);if(a){var t=a[1];if(t){if(cssAngleUnits.indexOf(t.toLowerCase())>=0)return{value:e};var r=parseFloat(e);return"rad"===t.toLowerCase()?(r=Math.round(180*r/Math.PI),{value:r+cssAngleUnits[0],reason:function(e,a,r){return"WARNING: 属性 `"+(0,_utils.camelCaseToHyphened)(e)+"` 不支持单位 `"+t+"`, 自动转换为 `"+cssAngleUnits[0]+"`"}}):{value:r+cssAngleUnits[0],reason:function(e,a,r){return"ERROR: 属性 `"+(0,_utils.camelCaseToHyphened)(e)+"` 不支持单位 `"+t+"`, 目前仅支持 `"+JSON.stringify(cssAngleUnits)+"`"}}}return{value:parseFloat(e)+cssAngleUnits[0],reason:function(e,a,t){return"WARNING: 属性 `"+(0,_utils.camelCaseToHyphened)(e)+"` 没有指定单位，默认为 `"+cssAngleUnits[0]+"`"}}}return{value:null,reason:function(e,a,t){return"ERROR: 属性 `"+(0,_utils.camelCaseToHyphened)(e)+"` 的值不正确 `"+a+"` (仅支持数值)"}}},enum:function(e,a){var t=e.indexOf(a);return t>0?{value:a}:0===t?{value:a,reason:!1}:{value:null,reason:function(a,t,r){return"ERROR: 属性`"+(0,_utils.camelCaseToHyphened)(a)+"` 的值 `"+t+"` 无效 ` (有效枚举值为: `"+e.join("`|`")+"`)"}}},gradientdirection:function(e){e=(e||"").toString().trim();var a=e.split(/\s+/),t=[],r=[];return a.forEach(function(e){"to"===e?r.push(0):"top"===e|"bottom"===e?r.push(1):"left"===e|"right"===e?r.push(2):t.push(e)}),0===t.length&&r.length>1&&r.length<4&&0===r[0]&&0!==r[1]?r[2]&&r[1]+r[2]!==3&&(t=a):t=a,{value:t.length>0?null:a.join(" "),reason:t.length>0?function(e,a,r){return"ERROR:  属性`"+(0,_utils.camelCaseToHyphened)(e)+"` 的属性值 `"+t.join(" ")+"` 格式不正确 `)"}:null}},arraylength:function(e,a,t){a=(a||"").toString().trim();var r=a.split(/[,\s]+/);if(r&&r.length<=e.length){var n,l=[],o=[],i=0;return r.forEach(function(e,a){if(n=validator.length(e,t),(0,_utils.isValidValue)(n.value)&&l.push(n.value),n.reason){var r=n.reason(a.toString(),e,n.value),u=r.match(/^([A-Z]+):/);if(u){var s=logTypes.indexOf(u[1]);i<logTypes.indexOf(u[1])&&(i=s),r=r.replace(u[0],"").trim()}o.push(r)}}),{value:i<2?(0,_utils.splitAttr)(e,l):null,reason:o.length>0?function(e,a,t){return logTypes[i]+": 属性`"+(0,_utils.camelCaseToHyphened)(e)+"` 的值 `"+a+"` 存在问题: \n  "+o.join("\n  ")}:null}}return{value:null,reason:function(e,a,t){return"ERROR: 属性`"+(0,_utils.camelCaseToHyphened)(e)+"` 的值 `"+a+"` 格式不正确"}}},arraycolor:function(e,a){a=(a||"").toString();var t=a.match(REGEXP_ARRAYCOLOR);if(t&&t.length<=4){var r,n=[],l=[],o=0;return t.forEach(function(e,a){if(r=validator.color(e),(0,_utils.isValidValue)(r.value)&&n.push(r.value),r.reason){var t=r.reason(a.toString(),e,r.value),i=t.match(/^([A-Z]+):/);if(i){var u=logTypes.indexOf(i[1]);o<logTypes.indexOf(i[1])&&(o=u),t=t.replace(i[0],"").trim()}l.push(t)}}),{value:o<2?(0,_utils.splitAttr)(e,n):null,reason:l.length>0?function(e,a,t){return logTypes[o]+": 属性`"+(0,_utils.camelCaseToHyphened)(e)+"` 的值 `"+a+"` 存在问题: \n  "+l.join("\n  ")}:null}}return{value:null,reason:function(e,a,t){return"ERROR: 属性`"+(0,_utils.camelCaseToHyphened)(e)+"` 的值 `"+a+"` 格式不正确"}}},arraycolorstop:function(e){e=(e||"").toString().trim();var a=e.match(REGEXP_ARRAYCOLORSTOP);if(a&&a.length>1){var t=[],r=[],n=0;return a.forEach(function(a,l){var o=a.match(/[\s]+[-+0-9]+(px|%)?$/),i=[];if(o){var u=validator.length(o[0]),s=a.indexOf(o[0]);if(a=a.substring(0,s),(0,_utils.isValidValue)(u.value)&&i.push(u.value),u.reason){var d=u.reason(l.toString(),o[0],u.value),c=d.match(/^([A-Z]+):/);if(c){var v=logTypes.indexOf(c[1]);n<logTypes.indexOf(c[1])&&(n=v),d=d.replace(c[0],"").trim()}r.push(d)}}if(a){var g=validator.color(a);if((0,_utils.isValidValue)(g.value)&&i.unshift(g.value),t.push(i.join(" ")),g.reason){var h=g.reason(l.toString(),a,g.value),f=h.match(/^([A-Z]+):/);if(f){var m=logTypes.indexOf(f[1]);n<logTypes.indexOf(f[1])&&(n=m),h=h.replace(f[0],"").trim()}r.push(h)}}else n=2,r.push("参数 `"+e+"` 格式不正确")}),{value:n<2?JSON.stringify(t):null,reason:r.length>0?function(e,a,t){return logTypes[n]+": 属性`"+(0,_utils.camelCaseToHyphened)(e)+"` 的值 `"+a+"` 存在问题: \n  "+r.join("\n  ")}:null}}return{value:null,reason:function(e,a,t){return"ERROR: 属性`"+(0,_utils.camelCaseToHyphened)(e)+"` 的值 `"+a+"` 格式不正确，至少指定两种颜色"}}},mylocation:function(e,a){e=(e||"").toString();var t=e.split(/\s+/);if(t&&t.length<=3){var r,n=[],l=[],o=0,i=[],u=-1;return t.forEach(function(e,t){if((0,_utils.isValidValue)(validator.color(e).value)?(i.push(t),0===t?(r=validatorMap.mylocationFillColor(e),n.push({n:"mylocationFillColor",v:r.value})):1===t&&(r=validatorMap.mylocationStrokeColor(e),n.push({n:"mylocationStrokeColor",v:r.value}))):(0,_utils.isValidValue)(validator.url(e,a).value)?(i.push(2),r=validatorMap.mylocationIconPath(e,a),n.push({n:"mylocationIconPath",v:r.value})):(r={},o=2,l.push("属性`"+t+"` 的值 `"+e+"` 存在问题: \n  不满足fillColor、strokeColor和iconPath的检验标准")),r&&r.reason){var u=r.reason(t.toString(),e,r.value),s=u.match(/^([A-Z]+):/);if(s){var d=logTypes.indexOf(s[1]);o<logTypes.indexOf(s[1])&&(o=d),u=u.replace(s[0],"").trim()}l.push(u)}}),i.forEach(function(e){e>u?u=e:(o=2,l.push("必须按顺序设置属性fillColor、strokeColor和iconPath"))}),{value:o<2?n:null,reason:l.length>0?function(e,a,t){return logTypes[o]+": 属性`"+(0,_utils.camelCaseToHyphened)(e)+"` 的值 `"+a+"` 存在问题: \n  "+l.join("\n  ")}:null}}return{value:null,reason:function(e,a,t){return"ERROR: 属性`"+(0,_utils.camelCaseToHyphened)(e)+"` 的值 `"+a+"` 格式不正确"}}},border:function(e,a){e=(e||"").toString();var t=e.split(/\s+/);if(t&&t.length<=3){var r,n=[],l=[],o=0,i=[],u=-1;return t.forEach(function(e,t){if((0,_utils.isValidValue)(validator.length(e,a).value)?(i.push(0),r=validatorMap.borderWidth(e),r.value instanceof Array&&(n=n.concat(r.value))):(0,_utils.isValidValue)(validatorMap.borderStyle(e).value)?(i.push(1),r=validatorMap.borderStyle(e),n.push({n:"borderStyle",v:e})):(0,_utils.isValidValue)(validator.color(e).value)?(i.push(2),r=validatorMap.borderColor(e),r.value instanceof Array&&(n=n.concat(r.value))):(r={},o=2,l.push("属性`"+t+"` 的值 `"+e+"` 存在问题: \n  不满足width、style和color的检验标准")),r&&r.reason){var u=r.reason(t.toString(),e,r.value),s=u.match(/^([A-Z]+):/);if(s){var d=logTypes.indexOf(s[1]);o<logTypes.indexOf(s[1])&&(o=d),u=u.replace(s[0],"").trim()}l.push(u)}}),i.forEach(function(e){e>u?u=e:(o=2,l.push("必须按顺序设置属性width style color"))}),{value:o<2?n:null,reason:l.length>0?function(e,a,t){return logTypes[o]+": 属性`"+(0,_utils.camelCaseToHyphened)(e)+"` 的值 `"+a+"` 存在问题: \n  "+l.join("\n  ")}:null}}return{value:null,reason:function(e,a,t){return"ERROR: 属性`"+(0,_utils.camelCaseToHyphened)(e)+"` 的值 `"+a+"` 格式不正确"}}},display:function(e){e=(e||"").toString();var a=["flex","none"],t=a.indexOf(e);return t>0?{value:e}:"block"===e?{value:"flex",reason:function(e,t,r){return"ERROR: 属性`"+(0,_utils.camelCaseToHyphened)(e)+"` 的值 `"+t+"` 需修改为flex ` (有效枚举值为: `"+a.join("`|`")+"`)"}}:0===t?{value:e,reason:!1}:{value:null,reason:function(e,t,r){return"ERROR: 属性`"+(0,_utils.camelCaseToHyphened)(e)+"` 的值 `"+t+"` 无效 ` (有效枚举值为: `"+a.join("`|`")+"`)"}}}},backgroundValidatorMap={linearGradient:validator.linearGradient,repeatingLinearGradient:validator.linearGradient,linearGradientColor:validator.arraycolorstop,linearGradientAngle:validator.angle,linearGradientDirection:validator.gradientdirection},transformValidatorMap={translate:makeAbbrAttrValidator("arraylength",["translateX","translateY"]),translateX:makeLengthValidator(["px","%"]),translateY:makeLengthValidator(["px","%"]),scale:makeAbbrAttrValidator("arraynumber",["scaleX","scaleY"]),scaleX:validator.number,scaleY:validator.number,rotate:validator.angle,rotateX:validator.angle,rotateY:validator.angle},validatorMap={width:validator.length,height:validator.length,padding:makeAbbrAttrValidator("arraylength",["paddingTop","paddingRight","paddingBottom","paddingLeft"]),paddingLeft:validator.length,paddingRight:validator.length,paddingTop:validator.length,paddingBottom:validator.length,margin:makeAbbrAttrValidator("arraylength",["marginTop","marginRight","marginBottom","marginLeft"]),marginLeft:validator.length,marginRight:validator.length,marginTop:validator.length,marginBottom:validator.length,border:validator.border,borderWidth:makeAbbrAttrValidator("arraylength",["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"]),borderLeftWidth:validator.length,borderTopWidth:validator.length,borderRightWidth:validator.length,borderBottomWidth:validator.length,borderColor:makeAbbrAttrValidator("arraycolor",["borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"]),borderLeftColor:validator.color,borderTopColor:validator.color,borderRightColor:validator.color,borderBottomColor:validator.color,borderStyle:makeEnumValidator(["solid","dotted","dashed"]),borderRadius:validator.length,borderBottomLeftRadius:validator.length,borderBottomRightRadius:validator.length,borderTopLeftRadius:validator.length,borderTopRightRadius:validator.length,indicatorSize:validator.length,flex:validator.number,flexGrow:validator.number,flexShrink:validator.number,flexBasis:validator.length,flexDirection:makeEnumValidator(["row","column"]),flexWrap:makeEnumValidator(["nowrap","wrap","wrap-reverse"]),justifyContent:makeEnumValidator(["flex-start","flex-end","center","space-between","space-around"]),alignItems:makeEnumValidator(["stretch","flex-start","flex-end","center"]),alignContent:makeEnumValidator(["stretch","flex-start","flex-end","center","space-between","space-around"]),alignSelf:makeEnumValidator(["auto","flex-start","flex-end","center","baseline","stretch"]),position:makeEnumValidator(["none","fixed"]),top:validator.length,bottom:validator.length,left:validator.length,right:validator.length,zIndex:validator.integer,opacity:validator.number,background:validator.background,backgroundColor:validator.color,backgroundImage:validator.url,backgroundSize:validator.backgroundSize,backgroundRepeat:makeEnumValidator(["no-repeat","repeat","repeat-x","repeat-y"]),backgroundPosition:validator.backgroundPosition,display:validator.display,visibility:makeEnumValidator(["visible","hidden"]),lines:validator.integer,color:validator.color,fontSize:validator.length,fontStyle:makeEnumValidator(["normal","italic"]),fontWeight:makeEnumValidator(["normal","bold"]),textDecoration:makeEnumValidator(["none","underline","line-through"]),textAlign:makeEnumValidator(["left","center","right"]),lineHeight:validator.length,textOverflow:makeEnumValidator(["clip","ellipsis"]),transform:validator.transform,transformOrigin:validator.position,animationName:validator.name,animationDuration:validator.time,animationTimingFunction:makeEnumValidator(["linear","ease","ease-in","ease-out","ease-in-out"]),animationDelay:validator.time,animationIterationCount:validator.iterationcount,animationFillMode:makeEnumValidator(["none","forwards"]),placeholderColor:validator.color,selectedColor:validator.color,textColor:validator.color,timeColor:validator.color,textHighlightColor:validator.color,strokeWidth:validator.length,progressColor:validator.color,indicatorColor:validator.color,indicatorSelectedColor:validator.color,slideWidth:validator.length,slideMargin:validator.length,resizeMode:makeEnumValidator(["cover","contain","stretch","center"]),columns:validator.number,columnSpan:validator.number,maskColor:validator.color,mylocation:validator.mylocation,mylocationFillColor:validator.color,mylocationStrokeColor:validator.color,mylocationIconPath:validator.url,starBackground:validator.url,starForeground:validator.url,starSecondary:validator.url,fontSrc:validator.fontSrc,fontFamily:validator.fontFamily};module.exports={colorNames:colorNames,validatorMap:validatorMap,validator:validator,validate:validate,validatePseudoClass:validatePseudoClass,validatePseudoElement:validatePseudoElement,enumValidatorFactory:makeEnumValidator};