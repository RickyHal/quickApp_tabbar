const devicesEmitter = require('../index')
const chai = require('chai')

const assert = chai.assert

describe('devicesEmitter', () => {

  it('start stop', (done => {

    devicesEmitter.on('deviceAdded', ({ sn }) => {
      console.log('deviceAdded sn:', sn)
    })
    devicesEmitter.on('deviceRemoved', ({ sn }) => {
      console.log('deviceRemoved sn:', sn)
      assert.exists(sn, 'sn exists')
      console.log('stop')
      devicesEmitter.stop()
      setTimeout(()=>{
        console.log('start')
        devicesEmitter.start()

      }, 10000)

    })
    devicesEmitter.start()

  }))

})
